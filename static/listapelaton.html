<!DOCTYPE html>
<html lang="el">
<head>
<meta charset="UTF-8">
<title>Λίστα Πελατών</title>

<style>
body { font-family: Arial; }
table { width: 80%; margin: auto; border-collapse: collapse; }
th, td { border: 1px solid #ccc; padding: 10px; text-align: center; }
.approve { background: green; color: white; }
.reject { background: red; color: white; }
</style>
</head>

<body>
<h2 style="text-align:center;">Αιτήσεις Πελατών</h2>

<table>
<thead>
<tr>
  <th>Όνομα</th>
  <th>Κατάσταση</th>
  <th>Ενέργεια</th>
</tr>
</thead>
<tbody id="rows"></tbody>
</table>

<script>
fetch("/api/pelatais")
.then(res => res.json())
.then(data => {
  const rows = document.getElementById("rows");

  data.forEach(p => {
    if (p.status !== "pending") return;

    const tr = document.createElement("tr");
    tr.innerHTML = `
      <td>${p.name}</td>
      <td>Αναμονή</td>
      <td>
        <button class="approve" onclick="approve('${p.name}')">Αποδοχή</button>
        <button class="reject" onclick="reject('${p.name}')">Απόρριψη</button>
      </td>
    `;
    rows.appendChild(tr);
  });
});

function approve(name) {
  if (!confirm("Να εγκριθεί ο πελάτης;")) return;
  fetch("/api/approve/" + encodeURIComponent(name), { method: "POST" })
    .then(() => location.reload());
}

function reject(name) {
  if (!confirm("Να απορριφθεί ο πελάτης;")) return;
  fetch("/api/reject/" + encodeURIComponent(name), { method: "POST" })
    .then(() => location.reload());
}
</script>
</body>
</html>


